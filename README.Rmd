---
title: "EPGMr"
output: github_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#devtools::install_github("GuangchuangYu/badger")
library(badger)
library(EPGMr)
```

[![DOI](https://zenodo.org/badge/234599925.svg)](https://zenodo.org/badge/latestdoi/234599925)

`r badge_last_commit("SwampThingPaul/EPGMr")`

***
# This Package is still _in Development_

# Task Lists
- [x] Distance profile function, `EPGMProfile()` with plots.
- [x] Add summary reults table to distance profile function, `EPGMProfile()`.
- [x] Develop time-series function, `EPGMTime()`.
  - [ ] Develope time-series results summary function (__In Progress__).
- [ ] Develop threshold evaluation function.
- [ ] Figure out how to code greek (i.e. mu) and superscript for `.Rd` files.
- [ ] Submit to [rOpenSci](https://ropensci.org/) for community peer-review.
- [ ] Submit to [CRAN](https://cran.r-project.org/submit.html).

***

__Contact Info:__  [Webpage](http://swampthingecology.org) - [Twitter](https://twitter.com/SwampThingPaul) - [Email](mailto:pauljulianphd@gmail.com)

***
This package is an R-version of the original Everglades Phosphorus Gradient Model developed by Walker and Kadlec and implements the model described in:

* Walker WW, Kadlec, R.H. (1996) A Model for Simulating Phosphorus Concentrations in Waters and Soils Downstream of Everglades Stormwater Treatment Areas. U.S. Department of the Interior. Links to: [Report](http://www.wwwalker.net/epgm/epgm_Aug_1996_1_of_2.pdf); [Appendix](http://www.wwwalker.net/epgm/epgm_Aug_1996_2_of_2.pdf).
 
The model is further discussed in:

* Kadlec RH, Walker WW (1999) Management models to evaluate phosphorus impacts on wetlands. In: Reddy KR, O’Conner GA, Schelske CL (eds) Phosphorus Biogeochemistry in Subtropical Ecosystems. Lewis Publishers, Boca Raton, FL, pp 621–639.

* Walker WW, Kadlec RH (2011) Modeling Phosphorus Dynamics in Everglades Wetlands and Stormwater Treatment Areas. Critical Reviews in Environmental Science and Technology 41:430–446. 


***

## From the Original EPGM documentation developed by [Walker and Kadlec (1996)](http://www.wwwalker.net/epgm/).
### Synopsis:
Everglades Phosphorus Gradient Model (EPGM; Figure 1) predicts variations in water-column phosphorus (P) concentration, peat accretion rate, and soil P concentration along a horizontal gradient imposed by an external P load and sheet-flow conditions. Cattail densities and total areas are predicted based upon correlations with soil P and are surrogates for impacts on ecosystem components which respond to soil P variations in similar concentration ranges. The model is calibrated to soil and vegetation data from WCA-2 (primarily), WCA-1, and WCA-3A. The model successfully simulates observed [longitudinal gradients in soil P concentration below the S10 structures in WCA-2A](http://www.wwwalker.net/epgm/wca2a_gradient.htm) after ~28 years of external P loading (1962 to 1990). Observed expansion of cattail populations in this region between 1973 and 1991 is also simulated, though somewhat over-predicted during the first 20 years. Model results suggest a linear relationship between marsh water-column and soil P concentrations over long time scales. Estimated soil response times range from 20 to 40 years, depending on soil depth, and are inversely related to water-column concentration.

### Conceptual Figure of the Model

![EPGM](http://www.wwwalker.net/epgm/epgmpic.gif)

Everglades Phosphorus Gradient Model structure (_Walker and Kadlec 1996_)

***


## EPGMr Installation

```{r,eval=F}
install.packages("devtools");# if you do not have it installed on your PC
devtools::install_github("SwampThingPaul/EPGMr")
```

## Functions

_Distance Profile_

This will run the example case number 11, plot the distance profile depicited below and provide a summary results table. If `raw.output` was set to `TRUE`, the raw data behind the plots and summary tables would be printed in the console. If `results.table` was set to `TRUE` then a summary results table will be printed (default). The results output table under `$DistanceProfile` provides a summary of the simulation period at several user input distances, however the default argument in the function is `summary.distance=c(0,0.5,1,2,4,8,10)`. Other information in the summary result tab include, simulation inputs, water budget, phosphorus mass balance and information on regarding soils for the simulation period (default is 30 years). 

```{r distance profile plot, echo=TRUE, fig.width=8,fig.height=5,fig.align='center'}
EPGMProfile(case.no=11,plot.profile=T,summary.distance=c(0,1,2,4,10))
```

_Time Profile_

This function will run the EPGM model over a determined period of time (with specificied time increment). If `raw.output` was set to `TRUE`, the raw data behind the plots and summary tables would be printed in the console. This will results in a `data.frame` with data specific to space (i.e. distance) and time (i.e. year).

```{r time profile plot, echo=TRUE, fig.width=8,fig.height=5,align='center'}
EPGMTime(case.no=11)
```

